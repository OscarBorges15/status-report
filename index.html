<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Status Report — PIX BASA</title>
  <style>
    :root{
      --primary:#00E12D;
      --secondary:#0C3224;
      --support1:#6CA657;
      --support2:#00E52D;
      --support3:#37E655;
      --active:#2563eb;
      --bg:#f6f8fb;
      --card:#ffffff;
      --muted:#4b5563;
      --radius:12px; --pad:18px;
      font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;
    }
    *{box-sizing:border-box}
    body{margin:0;background:linear-gradient(180deg,var(--bg),#eef3fb);color:var(--secondary)}
    .wrap{max-width:980px;margin:28px auto;padding:18px}
    .card{background:var(--card);border-radius:var(--radius);box-shadow:0 6px 22px rgba(12,26,75,0.06);padding:var(--pad)}

    header{display:flex;gap:16px;align-items:center;justify-content:space-between;flex-wrap:wrap;row-gap:8px;background:var(--secondary);color:white;border-radius:var(--radius);padding:12px 16px;margin-bottom:20px}
    .project{display:flex;gap:14px;align-items:center;flex:1 1 auto;min-width:0}
    .logo{width:56px;height:56px;border-radius:10px;background:var(--primary);display:flex;align-items:center;justify-content:center;color:var(--secondary);font-weight:700;font-size:18px}
    h1{font-size:18px;margin:0;color:white;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .status-container{margin-left:auto;display:flex;flex-direction:column;align-items:flex-end;gap:4px;white-space:nowrap;flex:0 0 auto;max-width:100%}
    .status-chip{display:inline-flex;gap:8px;align-items:center;justify-content:center;padding:8px 16px;border-radius:999px;font-weight:600;cursor:pointer;background:var(--primary);color:var(--secondary);text-align:center;font-size:14px;min-height:44px;line-height:1.2;white-space:nowrap;max-width:100%;min-width:0}

    .content{display:flex;flex-direction:column;gap:16px}

    .timeline strong{color:var(--secondary)}
    .timeline .events{display:flex;flex-direction:column;gap:6px;margin-top:10px}
    .event{display:flex;align-items:center;gap:8px;font-size:13px;color:var(--secondary)}
    .event .dot{width:10px;height:10px;border-radius:50%;background:var(--primary)}

    .phase-timeline{display:flex;gap:8px;margin-top:10px;flex-wrap:wrap}
    .phase{flex:1;min-width:90px;padding:6px 8px;border-radius:6px;font-size:12px;text-align:center;font-weight:600;color:white}
    .done{background:var(--support1)}
    .current{background:var(--active);color:white}
    .pending{background:#d1d5db;color:#374151}

    .days-remaining{margin-top:10px;font-size:13px;font-weight:700;padding:8px 12px;border-radius:8px;display:flex;align-items:center;justify-content:center;gap:6px;max-width:fit-content}
    .days-green{background:#dcfce7;color:#166534;border:1px solid #16a34a}
    .days-yellow{background:#fef9c3;color:#854d0e;border:1px solid #ca8a04}
    .days-red{background:#fee2e2;color:#991b1b;border:1px solid #dc2626}
    .days-none{background:#f3f4f6;color:#374151;border:1px solid #9ca3af}

    .days-remaining span.icon{font-size:16px}

    .solicitacoes{display:flex;flex-direction:column;gap:12px}
    .sol-box{padding:12px;border-radius:10px;border:1px solid var(--support1);background:linear-gradient(180deg,rgba(0,225,45,0.05),transparent)}
    .sol-box h3{margin:0;font-size:14px;color:var(--secondary);display:flex;justify-content:space-between;align-items:center}
    .sol-box p{margin:6px 0 6px;font-size:13px;color:var(--muted)}
    .progress{margin-top:6px;height:10px;background:#e6f5eb;border-radius:999px;overflow:hidden}
    .progress .fill{height:100%;background:var(--primary)}
    .progress-label{font-size:12px;color:var(--muted);margin-top:2px}
    .imp-alert{margin-top:8px;padding:8px 10px;border-radius:8px;background:rgba(239,68,68,0.1);border:1px solid rgba(239,68,68,0.25);color:#b91c1c;font-size:13px;font-weight:600}

    .actions{display:flex;justify-content:center;margin-top:24px}
    .btn{background:var(--primary);color:var(--secondary);padding:10px 16px;border-radius:8px;border:none;cursor:pointer;font-weight:600;min-height:44px}

    @media (max-width:900px){
      header{padding:10px 12px}
      .status-container{margin-left:auto;align-items:flex-end;width:auto;white-space:nowrap}
      .status-chip{align-self:flex-end;font-size:clamp(12px,4vw,15px);padding:8px 12px;min-height:44px;white-space:nowrap;max-width:100%}
    }
  </style>
  <script>
    function calcularDiasUteis(dataFinalStr) {
      if(!dataFinalStr) return null;
      const hoje = new Date();
      const partes = dataFinalStr.split('/');
      const dataFinal = new Date(partes[2], partes[1]-1, partes[0]);
      let count = 0;
      let dataAtual = new Date(hoje);
      while(dataAtual <= dataFinal){
        const dia = dataAtual.getDay();
        if(dia !== 0 && dia !== 6){
          count++;
        }
        dataAtual.setDate(dataAtual.getDate()+1);
      }
      return count-1;
    }
    function atualizarDias(){
      const elementos = document.querySelectorAll('[data-legal]');
      elementos.forEach(el => {
        const dataLegal = el.getAttribute('data-legal');
        if(dataLegal){
          const dias = calcularDiasUteis(dataLegal);
          if(dias < 0){
            el.innerHTML = `<span class="icon">📅</span> Prazo estourado (${dataLegal})`;
            el.className = 'days-remaining days-red';
          } else if(dias <= 5){
            el.innerHTML = `<span class="icon">📅</span> ${dias} dias úteis restantes até ${dataLegal}`;
            el.className = 'days-remaining days-yellow';
          } else {
            el.innerHTML = `<span class="icon">📅</span> ${dias} dias úteis restantes até ${dataLegal}`;
            el.className = 'days-remaining days-green';
          }
        } else {
          el.innerHTML = `<span class="icon">📅</span> Sem prazo legal definido`;
          el.className = 'days-remaining days-none';
        }
      });
    }
    window.onload = atualizarDias;
  </script>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <header>
        <div class="project">
          <div class="logo">PB</div>
          <div>
            <h1>Projeto: PIX BASA</h1>
          </div>
        </div>
        <div class="status-container">
          <div id="statusChip" class="status-chip">🟢 <span id="statusText">Em andamento</span></div>
          <div class="meta">Última atualização: <span contenteditable>10/09/2025</span></div>
        </div>
      </header>

      <div class="content">
        <section class="card">
          <strong style="color:var(--secondary)">Solicitações Ativas</strong>
          <div class="solicitacoes">
            <div class="sol-box">
              <h3>JDPI · Pix Automático (API v5.2.1 / v1.1.1)</h3>
              <p>Recebida em 25/08. Entendimento iniciado 01/09. APN 04/09. Casos de Uso 10/09. Escopo alterado em 10/09: Hash obrigatório.</p>
              <div class="progress"><div class="fill" style="width:10%"></div></div>
              <div class="progress-label">10% concluído</div>
              <div class="imp-alert">🚫 Impedimento (10/09): dúvidas sobre Hash enviadas — <strong>aguardando retorno da JDPI</strong> para prosseguir.</div>
              <div class="timeline" style="margin-top:8px">
                <strong>Linha do Tempo</strong>
                <div class="events">
                  <div class="event"><div class="dot"></div><div>25/08 — Solicitação recebida</div></div>
                  <div class="event"><div class="dot"></div><div>01/09 — Início do entendimento técnico</div></div>
                  <div class="event"><div class="dot"></div><div>04/09 — APN finalizado</div></div>
                  <div class="event"><div class="dot"></div><div>10/09 — Casos de uso finalizados</div></div>
                  <div class="event"><div class="dot"></div><div>10/09 — Escopo alterado: Hash obrigatório</div></div>
                </div>
              </div>
              <div class="phase-timeline">
                <div class="phase current">Requisitos</div>
                <div class="phase pending">Desenvolvimento</div>
                <div class="phase pending">Teste</div>
                <div class="phase pending">Homologação</div>
                <div class="phase pending">Produção</div>
              </div>
              <div class="days-remaining" data-legal></div>
            </div>
            <div class="sol-box">
              <h3>Rate Limit (PO Edglayson)</h3>
              <p>Prioridade solicitada em 09/09. Entendimento iniciado 10/09. Dúvidas enviadas ao time JDPI.</p>
              <div class="progress"><div class="fill" style="width:10%"></div></div>
              <div class="progress-label">10% concluído</div>
              <div class="imp-alert">🚫 Impedimento (10/09): <strong>aguardando retorno da JDPI</strong> para retomar a solicitação.</div>
              <div class="timeline" style="margin-top:8px">
                <strong>Linha do Tempo</strong>
                <div class="events">
                  <div class="event"><div class="dot"></div><div>09/09 — PO solicitou priorização</div></div>
                  <div class="event"><div class="dot"></div><div>10/09 — Início do entendimento</div></div>
                  <div class="event"><div class="dot"></div><div>10/09 — Dúvidas enviadas à JDPI</div></div>
                </div>
              </div>
              <div class="phase-timeline">
                <div class="phase current">Requisitos</div>
                <div class="phase pending">Desenvolvimento</div>
                <div class="phase pending">Teste</div>
                <div class="phase pending">Homologação</div>
                <div class="phase pending">Produção</div>
              </div>
              <div class="days-remaining" data-legal></div>
            </div>
            <div class="sol-box">
              <h3>Autoatendimento MED</h3>
              <p>Desenvolvimento iniciado em 03/07. Prazo legal 30/09. Pausas entre 12/08–30/08 para urgências.</p>
              <div class="progress"><div class="fill" style="width:70%"></div></div>
              <div class="progress-label">70% concluído</div>
              <div class="timeline" style="margin-top:8px">
                <strong>Linha do Tempo</strong>
                <div class="events">
                  <div class="event"><div class="dot"></div><div>03/07 — Início do desenvolvimento</div></div>
                  <div class="event"><div class="dot"></div><div>12/08–30/08 — Pausa para demandas urgentes</div></div>
                  <div class="event"><div class="dot"></div><div>30/09 — Prazo legal de entrega</div></div>
                </div>
              </div>
              <div class="phase-timeline">
                <div class="phase done">Requisitos</div>
                <div class="phase current">Desenvolvimento</div>
                <div class="phase current">Teste</div>
                <div class="phase pending">Homologação</div>
                <div class="phase pending">Produção</div>
              </div>
              <div class="days-remaining" data-legal="30/09/2025"></div>
            </div>
          </div>
        </section>

        <section class="card">
          <strong style="color:var(--secondary)">🧾 Registro de Mudanças</strong>
          <div style="font-size:13px;color:var(--muted)" contenteditable>
            • 10/09 — BASA confirmou Hash como obrigatório; escopo reaberto.<br>
            • 10/09 — Casos de uso JDPI Pix Automático finalizados.<br>
            • 04/09 — APN finalizado (Pix Automático).<br>
            • 30/08 — Inclusão de demandas urgentes (Catálogo JDNPC, Mensagens SPB, Catálogo Pix 5.2.0, Pix Automático 1.1.0).
          </div>
        </section>

        <section class="card">
          <strong style="color:var(--secondary)">🧭 Backlog (Miro)</strong>
          <p class="meta">Visualização do board no Miro com as solicitações.</p>
          <div style="aspect-ratio:16/9;border:1px dashed var(--support1);border-radius:8px;overflow:hidden;background:rgba(12,50,36,0.05)">
            <iframe src="https://miro.com/app/board/uXjVIwZBdss=/" style="width:100%;height:100%;border:0" allowfullscreen loading="lazy"></iframe>
          </div>
        </section>

        <div class="actions">
          <button class="btn" onclick="window.print()">🖨️ Imprimir / PDF</button>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
